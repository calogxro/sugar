<!DOCTYPE HTML>
<html>
<head>
    <script src="sugar.js"></script>
</head>
<body>
    <script>
        sugar(() => {
            var ENDPOINT = 'api/todos'
            
            var todo = {
                "text": "thing to todo"
            }
            
            /*
            *  POST api/todos - create a todo
            */
            fetch(ENDPOINT, {
                method: 'POST',
                body: JSON.stringify(todo)
            })
            .then(response => response.json())
            .then(todo => {
                /*
                *  GET api/todo/{id} - retrieve the todo by id
                */
                fetch(`${ENDPOINT}/${todo.id}`)
                .then(response => response.json())
                .then(todo => {
                    console.log(todo)
                    /*  
                    output:
                    {
                        "text": "thing to todo",
                        "id": 1
                    }
                    */
                })
            })
        })
    </script>
</body>
</html>